generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model ScrapeCache {
  id        Int      @id @default(autoincrement())
  endpoint  String
  cacheKey  String   @unique
  data      Json
  scrapedAt DateTime @default(now()) @db.Timestamp(6)
  expiresAt DateTime @db.Timestamp(6)

  @@index([endpoint])
}

model Order {
  id          String   @id @default(cuid())
  telegramId  String
  packageId   String   
  amount      Int      
  status      String   @default("PENDING")
  imageHash   String?  @unique
  createdAt   DateTime @default(now())
}

model Token {
  id          String   @id @default(cuid())
  code        String   @unique
  packageId   String
  devices     Device[]
  expiryDate  DateTime
  createdAt   DateTime @default(now())
}

model Device {
  id        String   @id @default(cuid())
  deviceId  String   @unique
  tokenId   String
  token     Token    @relation(fields: [tokenId], references: [id])
}